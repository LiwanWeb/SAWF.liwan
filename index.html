<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>تلوين الـســديري</title>
<link href="https://fonts.googleapis.com/css2?family=El+Messiri:wght@400;500;600;700&display=swap" rel="stylesheet">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>

  /* تنسيقات خاصة للجوال */
@media (max-width: 768px) {
  header {
    flex-direction: column;
    text-align: center;
    padding: 10px;
  }

  nav {
    margin-top: 10px;
  }

  .main-layout {
    flex-direction: column;
    align-items: center;
    padding: 20px 10px;
    gap: 20px;
  }

  .control-box {
    width: 100%;
    flex-direction: column;
    gap: 10px;
  }

  canvas {
    margin: 20px auto 0 auto;
    width: 100%;
    max-width: 350px;
    margin-right: 0;
  }

  .btn-container {
    max-width: 100%;
    flex-direction: column;
  }

  .btn-container button {
    flex: 1 1 100%;
  }
}

/* شاشات أصغر من 480px (موبايل صغير) */
@media (max-width: 480px) {
  .btn {
    width: 100%;
    height: auto;
    font-size: 16px;
    padding: 10px;
  }

  select, input[type="file"], input[type="color"] {
    width: 100%;
  }

  .custom-upload {
    width: 100%;
    text-align: center;
  }
}
 
/* شاشات الجوال الصغيرة جدًا */
@media (max-width: 430px) {
  body {
    padding: 5px;
  }

  canvas {
    width: 100% !important;
    max-width: 300px;
  }

  .control-box, .btn-container {
    width: 100% !important;
  }

  .btn-container button,
  select,
  input[type="file"],
  input[type="color"] {
    width: 100% !important;
    font-size: 14px;
  }

  header h1 {
    font-size: 18px;
  }
}

  body {
    margin: 0;
    font-family: 'El Messiri', sans-serif;
    background: radial-gradient(circle at top left, #b8a58f, #3e3b38);
    color: white;
    display: flex;
    flex-direction: column;
    min-height: 100vh;
    height: 100%;
  margin: 0;
  overflow: hidden; /* يمنع التمرير */
  }

  header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 15px 40px;
    background: rgba(0,0,0,0.3);
    backdrop-filter: blur(6px);
  }

  .logo {
    font-weight: bold;
    font-size: 20px;
  }

  nav {
    display: flex;
    align-items: center;
    gap: 20px;
  }

  nav a {
    color: white;
    text-decoration: none;
    font-size: 14px;
    transition: color 0.3s;
  }
  nav a:hover {
    color: #ff9800;
  }

  .btn {
    width: 90px; /* عرض الزر */
    height: 50px; /* ارتفاع الزر نفس العرض ليكون مربع */
    border: none;
    border-radius: 15px; /* حواف ناعمة */
    cursor: pointer;
    font-weight: bold;
    color: white;
    transition: transform 0.2s, background 0.3s;
    font-size: 18px; /* حجم النص */
}

.btn:hover {
    transform: scale(1.05);
}


  .main-layout {
    display: flex;
    justify-content: center;
    align-items: flex-start;
    padding: 40px 20px;
    flex-wrap: wrap;
    gap: 40px;
  }

  .controls {
    display: flex;
    flex-direction: column;
    gap: 20px;
  }

  .control-box {
    background: #1e1e1e;
    padding: 10px;
    border-radius: 12px;
    box-shadow: 0 4px 10px rgba(0,0,0,0.5);
    width: 400px;
    margin-top: 170px;
    display: flex;        /* يخلي العناصر جنب بعض */
    align-items: center;  /* يوسّطهم عموديًا */
    gap: 20px;            /* مسافة بينهم */
}

.controls1 {
    display: flex;
    flex-direction: column;
    gap: 30px;
  }

  .control1-box {
    background: #1e1e1e;
    padding: 10px;
    border-radius: 12px;
    box-shadow: 0 4px 10px rgba(0,0,0,0.5);
    width: 400px;
    margin-top: 15px;
    margin-bottom: 25px;
    display: flex;        /* يخلي العناصر جنب بعض */
    align-items: center;  /* يوسّطهم عموديًا */
    gap: 20px;            /* مسافة بينهم */
}


  .control-box p {
    margin-bottom: 8px;
    font-weight: bold;
  }

  input[type="file"], select, input[type="color"], button {
    width: 100%;
    margin-top: 8px;
    border-radius: 8px;
  }

  input[type="file"], select {
    padding: 8px;
    border: none;
    background: #2a2a2a;
    color: #fff;
    cursor: pointer;
  }

  input[type="color"] {
    height: 40px;
    border: none;
    cursor: pointer;
  }

  button {
    padding: 10px;
    background: linear-gradient(45deg, #c47805, #9e7a40);
    color: white;
    border: none;
    font-weight: bold;
    cursor: pointer;
    font-family: inherit;
    transition: transform 0.2s, background 0.3s;
    width: 180px;  
  }

  canvas {
    max-width: 440px; /* الحجم */
    width: 80%;
    border-radius: 12px;
    background: #2a2a2a00;
    margin-top: 40px; /* ينزل تحت 20px */
    margin-right: 200px; /* يحركه لليسار */
  }

  #upload2 {
  display: none;
} #upload1 {
  display: none;
}

/* تصميم الزر المخصص */
.custom-upload {
  background-color: hsla(36, 100%, 50%, 0);
  font-family: 'El Messiri', sans-serif;

  color: white;
  padding: 8px 16px;
  border-radius: 80px;
  cursor: pointer;
  display: inline-block;
}

#color1 {
            text-align-last: center; /* للمتصفحات الحديثة */
            appearance: none;
            -webkit-appearance: none;
            -moz-appearance: none;
            background-color: #222;
            color: white;
            padding: 10px;
            border-radius: 8px;
            border: none;
            outline: none;
            font-size: 16px;
            cursor: pointer;
            width: 150px;
            text-align: center;
            font-family: 'El Messiri', sans-serif; /* الخط الجديد */
          
            /* سهم */
            background-image: url("data:image/svg+xml;utf8,<svg fill='white' height='24' viewBox='0 0 24 24' width='24' xmlns='http://www.w3.org/2000/svg'><path d='M7 10l5 5 5-5z'/></svg>");
            background-repeat: no-repeat;
            background-position: right 8px center;
            background-size: 20px;
            padding-right: 35px;
          }
          
          #color1 option {
            padding: 10px;
            font-size: 14px;
          } 


          #color2 {
            text-align-last: center; /* للمتصفحات الحديثة */
            appearance: none;
            -webkit-appearance: none;
            -moz-appearance: none;
            background-color: #222;
            color: white;
            padding: 10px;
            border-radius: 8px;
            border: none;
            outline: none;
            font-size: 16px;
            cursor: pointer;
            width: 150px;
            text-align: center;
            font-family: 'El Messiri', sans-serif; /* الخط الجديد */
          
            /* سهم */
            background-image: url("data:image/svg+xml;utf8,<svg fill='white' height='24' viewBox='0 0 24 24' width='24' xmlns='http://www.w3.org/2000/svg'><path d='M7 10l5 5 5-5z'/></svg>");
            background-repeat: no-repeat;
            background-position: right 8px center;
            background-size: 20px;
            padding-right: 35px;
          }
          
          #color2 option {
            padding: 10px;
            font-size: 14px;
          }

          :root {
    --btn-color:  #9a7a40;
    --btn-color-dark: #0f1010;
  }

  /* ترتيب الأزرار */
  .btn-container {
    display: flex;
    flex-wrap: wrap;
    gap: 10px; /* المسافة بين الأزرار */
    max-width: 400px; /* عرض الحاوية */
  }

  /* أول زرين نص العرض */
  .btn-container button {
    flex: 1 1 calc(50% - 10px);
  }

  /* الزر الثالث بعرض كامل */
  .btn-container button:nth-child(3) {
    flex: 1 1 100%;
  }

  button {
    display: inline-block;
    padding: 0.75rem 1.25rem;
    border-radius: 10rem;
    color: #fff;
    text-transform: uppercase;
    font-size: 1rem;
    letter-spacing: 0.15rem;
    transition: all 0.3s;
    position: relative;
    overflow: hidden;
    z-index: 1;
    border: none;
    cursor: pointer;
    background: none;
    font-family: inherit;
    width: 180px;
  }

  button::after {
    content: '';
    position: absolute;
    bottom: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: var(--btn-color);
    border-radius: 10rem;
    z-index: -2;
  }

  button::before {
    content: '';
    position: absolute;
    bottom: 0;
    left: 0;
    width: 0%;
    height: 100%;
    background-color: var(--btn-color-dark);
    transition: all 0.3s;
    border-radius: 10rem;
    z-index: -1;
  }

  button:hover {
    color: #c47805;
  }

  button:hover::before {
    width: 100%;
  }
        
        /* تصليح ظهور الـcanvas في الهواتف */
@media (max-width: 768px) {
  html, body {
    overflow-x: hidden;   /* امنع سكرول جانبي */
    overflow-y: auto;     /* فعّل السكرول العمودي في الجوال */
  }

  /* ألغِ الإزاحة والثوابت اللي تكسر العرض في الشاشات الصغيرة */
  canvas {
    margin-right: 0 !important;
    margin-top: 16px !important;
    width: 100% !important;
    max-width: 100% !important;
  }

  .control-box, .btn-container {
    width: 100% !important;
  }
}

</style>

</head>
<body>
  <header>
    <div class="logo">    
      <a href="#"  onclick="location.reload();" target="_self">
        <img src="logo.png" alt="لـيــوان" style="height:90px; vertical-align:middle;">
      </a>
  </div>
  
    <div class="search-box">
        
    </div>
    <nav>
      <button class="btn" onclick="history.back()">رجوع</button>
  </nav>
  
</header>

<div class="main-layout">
  <div class="">
    <h2>
    </h2>
    
      <div class="control-box">
        
    

        <label for="upload1" style="
        display: flex; 
        justify-content: center; 
        align-items: center; 
        text-align: center; 
        width: fit-content;   /* يخلي العرض قد النص */
        margin: 0 auto;       /* يوسّط الزر نفسه بالصفحة */
      "  class="custom-upload">الـديـزايـن الخارجي</label>
        <input type="file" id="upload1">
        
          
        <br>
        <p>اللون</p>
<select id="color1" value="#808080">  <option value="#FDFDFD" style="background:#FDFDFD;color:black;">001</option>
  <option value="#FDFDFD" style="background:#FDFDFD;color:black;">002</option>
  <option value="#a7855f" style="background:#FDFDFD;color:black;">003</option>
  <option value="#a08363" style="background:#FDFDFD;color:black;">004</option>
  <option value="#FDFDFD" style="background:#FDFDFD;color:black;">005</option>
  <option value="#FFFFF4" style="background:#FFFFF4;color:black;">006</option>
  <option value="#F5FFFF" style="background:#F5FFFF;color:black;">007</option>
  <option value="#d0d1c6" style="background:#d0d1c6;color:black;">008</option>
  <option value="#cecfbf" style="background:#cecfbf;color:black;">009</option>
  <option value="#cfcdc1" style="background:#cfcdc1;color:black;">010</option>
  <option value="#c7c3ac" style="background:#c7c3ac;color:black;">011</option>
  <option value="#cfcdc1" style="background:#cfcdc1;color:black;">012</option>
  <option value="#cfd6d0" style="background:#cfd6d0;color:black;">013</option>
  <option value="#b9b5b5" style="background:#b9b5b5;color:black;">014</option>
  <option value="#b9bdb5" style="background:#b9bdb5;color:black;">015</option>
  <option value="#b9bfb5" style="background:#bfbfb5;color:black;">016</option>
  <option value="#edebeb" style="background:#edebeb;color:black;">017</option>
  <option value="#feefc6" style="background:#feefc6;color:black;">018</option>
  <option value="#feedcd" style="background:#feedcd;color:black;">019</option>
  <option value="#a69c7c" style="background:#a69c7c;">020</option>
  <option value="#9f9687" style="background:#9f9687;">021</option>
  <option value="#9f9686" style="background:#9f9687;">022</option>
  <option value="#766135" style="background:#766135;">023</option>
  <option value="#9f9589" style="background:#9f9589;">024</option>
  <option value="#b4aa7d" style="background:#b4aa7d;">025</option>  
  <option value="#b4aaa2" style="background:#b4aaa2;">026</option>
  <option value="#707066" style="background:#707066;">027</option>
  <option value="#707074" style="background:#707074;">028</option>
  <option value="#707070" style="background:#707070;">029</option>
  <option value="#494744" style="background:#454241;">030</option>
  <option value="#48413a" style="background:#48413a;">031</option>
  <option value="#45372a" style="background:#45372a;">032</option>
  <option value="#3d2c22" style="background:#3d2c22;">033</option>
  <option value="#231f1b" style="background:#231f1b;">034</option>
  <option value="#c9ae9e" style="background:#c9ae9e;">035</option>
  <option value="#c2a08c" style="background:#c9b0a5;">036</option>
  <option value="#b59390" style="background:#e1b1a5;">037</option>
  <option value="#884c3e" style="background:#eab0a5;">038</option>
  <option value="#5d362f" style="background:#e1b4bf;">039</option>
  <option value="#8f5050 " style="background:#8f5050;">040</option>
  <option value="#7d5050" style="background:#7d5050;">041</option>
  <option value="#331d1e" style="background:#331d1e;">042</option>
  <option value="#41090b" style="background:#41090b;">043</option>
  <option value="#6c0816" style="background:#6c0816;">044</option>
  <option value="#451915" style="background:#451915;">045</option>
  <option value="#350d12" style="background:#350d12;">046</option>
  <option value="#29121b" style="background:#29121b;">047</option>
  <option value="#21071a" style="background:#21071a; color:white;">048</option>
  <option value="#d7f1ff" style="background:#d7f1ff;color:black;">049</option>
<option value="#c8f1ff" style="background:#c8f1ff;color:black;">050</option>
<option value="#79c7c8" style="background:#79c7c8;">051</option>
<option value="#68b3b1" style="background:#68b3b1;">052</option>
<option value="#4d8e82" style="background:#4d8e82;">053</option>
<option value="#68c3bb" style="background:#68c3bb;">054</option>
<option value="#117788" style="background:#117788;">055</option>
<option value="#007997" style="background:#007997;">056</option>
<option value="#084449" style="background:#084449;">057</option>
<option value="#01515c" style="background:#01515c;">058</option>
<option value="#7dcaff" style="background:#7dcaff;">059</option>
<option value="#314f6a" style="background:#314f6a;">060</option>
<option value="#386276" style="background:#386276;">061</option>
<option value="#002e46" style="background:#002e46;">062</option>
<option value="#00283b" style="background:#00283b;">063</option>
<option value="#2583c6" style="background:#2583c6;">064</option>
<option value="#00385b" style="background:#00385b;">065</option>
<option value="#002e55" style="background:#002e55;">066</option>
<option value="#001c34" style="background:#001c34; color:white;">067</option>
<option value="#002437" style="background:#002437; color:white;">068</option>
<option value="#4d4d4d" style="background:#65644f; color:white;">069</option>
<option value="#595b1f" style="background:#595b1f; color:white;">070</option>
<option value="#2e3823" style="background:#2e3823; color:white;">071</option>
<option value="#002b1e" style="background:#002b1e; color:white;">072</option>
<option value="#003223" style="background:#003223;">073</option>
<option value="#002d1e" style="background:#002d1e;">074</option>
<option value="#00231e" style="background:#00231e;">075</option>
<option value="#002528" style="background:#002528;">076</option>
<option value="#fdd800" style="background:#fdd800;">077</option>
<option value="#b38f00" style="background:#b38f00;">078</option>
<option value="#c58f00" style="background:#c58f00;">079</option>
<option value="#724e0e" style="background:#724e0e; color:white;">080</option>
<option value="#72571f" style="background:#72571f; color:white;">081</option>
<option value="#7d4d00" style="background:#7d4d00; color:white;">082</option>
<option value="#5c4033" style="background:#da691e; color:white;">083</option>
<option value="#ac532e" style="background:#ac532e; color:white;">084</option>
<option value="#6b2b00" style="background:#6b2b00;">085</option>
<option value="#652500" style="background:#652500;">086</option>
<option value="#b6c7c7" style="background:#b6c7c7;">087</option>
<option value="#b7c0bc" style="background:#b7c0bc;">088</option>
<option value="#b7c4c9" style="background:#b7c4c9;">089</option>
<option value="#5c6566" style="background:#5c6566;">090</option>
<option value="#b0ada9" style="background:#b0ada9;">091</option>
<option value="#b0adb0" style="background:#b0adb0;">092</option>
<option value="#5c5e5c" style="background:#5c5e5c;">093</option>
<option value="#b8860b" style="background:#5c5e68; color:white;">094</option>
<option value="#ffcc00" style="background:#505e68;">095</option>
<option value="#a6b5bf" style="background:#a6b5bf;">096</option>
<option value="#7a868f" style="background:#7a868f;">097</option>
<option value="#5e6f7a" style="background:#5e6f7a;">098</option>
<option value="#455b69" style="background:#455b69;">099</option>
<option value="#303236" style="background:#303236;">100</option>
<option value="#3b3e46" style="background:#3b3e46;">101</option>
<option value="#1b1a1a" style="background:#1b1a1a;">102</option>
  <!-- زر تبديل الألوان -->

</select>

</div><div class="control1-box">


  <label for="upload2" style="
  display: flex; 
  justify-content: center; 
  align-items: center; 
  text-align: center; 
  width: fit-content;   /* يخلي العرض قد النص */
  margin: 0 auto;       /* يوسّط الزر نفسه بالصفحة */
"  class="custom-upload">الـديـزايـن الـداخـلـي</label>  <br><br>  
  <input type="file" id="upload2">

       
      </div>


      
      <!-- زر تطبيق الألوان -->
      <div class="btn-container">
      <button onclick="applyTints()">تطبيق الألوان</button>
      <!-- زر تحميل الصورة النهائية -->
      <button id="download-btn"onclick="downloadImage()"> تحميل الصورة </button>
    </div>
  </div>
    <canvas id="canvas"></canvas>
</div>



<script>
  // تغيير لون الخلفية حسب اللون المختار
document.getElementById('color1').addEventListener('change', function() {
  this.style.backgroundColor = this.value;

  // تحديد لون الخط بناءً على اللون المختار (فاتح أو غامق)
  let c = this.value.replace('#', '');
  let r = parseInt(c.substr(0, 2), 16);
  let g = parseInt(c.substr(2, 2), 16);
  let b = parseInt(c.substr(4, 2), 16);
  let brightness = (r * 299 + g * 587 + b * 114) / 1000;
  this.style.color = (brightness > 128) ? 'black' : 'white';
});

  const downloadBtn = document.getElementById('download-btn');

  downloadBtn.addEventListener('click', () => {
    // تغيير النص واللون
    downloadBtn.textContent = "تم التنزيل ✅";
    downloadBtn.style.setProperty('--btn-color', '#0f1010');
    downloadBtn.style.setProperty('--btn-color-dark', '#0f1010');

    // بعد ثانيتين يرجع طبيعي
    setTimeout(() => {
      downloadBtn.textContent = "تحميل الصورة النهائية ";
      downloadBtn.style.setProperty('--btn-color', '#9a7a40');
      downloadBtn.style.setProperty('--btn-color-dark', '#0f1010');
    }, 2000);
  });
</script>
<script>
  let swapState = false; // حالة التبديل
  
  let canvas = document.getElementById('canvas');
  let ctx = canvas.getContext('2d');
  let img1 = null, img2 = null;
  let originalPixels1 = null, originalPixels2 = null;
  let tintedPixels1 = null, tintedPixels2 = null;

  // تحميل الصور بدون تلوين
  window.addEventListener('load', () => {
    loadImage('وو.png', (imgA) => {
      img1 = imgA;
      renderFinal(); // اعرض الأصل فقط
    });
    loadImage('66.png', (imgB) => {
      img2 = imgB;
      renderFinal(); // اعرض الأصل فقط
    });
  });

  // رفع صورة جديدة بدل الافتراضية
  document.getElementById('upload1').addEventListener('change', function(e) {
    const file = e.target.files[0];
    if (!file) return;
    const reader = new FileReader();
    reader.onload = function(ev) {
      let imgA = new Image();
      imgA.onload = () => {
        img1 = imgA;
        renderFinal(); // اعرض الصورة الجديدة
      };
      imgA.src = ev.target.result;
    };
    reader.readAsDataURL(file);
  });

  document.getElementById('upload2').addEventListener('change', function(e) {
    const file = e.target.files[0];
    if (!file) return;
    const reader = new FileReader();
    reader.onload = function(ev) {
      let imgB = new Image();
      imgB.onload = () => {
        img2 = imgB;
        renderFinal(); // اعرض الصورة الجديدة
      };
      imgB.src = ev.target.result;
    };
    reader.readAsDataURL(file);
  });

  // دالة لتحميل الصورة
  function loadImage(src, callback) {
    let img = new Image();
    img.onload = () => {
      canvas.width = img.width;
      canvas.height = img.height;
      let tempCanvas = document.createElement('canvas');
      tempCanvas.width = img.width;
      tempCanvas.height = img.height;
      let tempCtx = tempCanvas.getContext('2d');
      tempCtx.drawImage(img, 0, 0);
      if (src === 'وو.png') {
        originalPixels1 = tempCtx.getImageData(0, 0, img.width, img.height);
        tintedPixels1 = originalPixels1;
      } else if (src === '66.png') {
        originalPixels2 = tempCtx.getImageData(0, 0, img.width, img.height);
        tintedPixels2 = originalPixels2;
      }
      callback(img); // استدعاء الكولباك بعد تحميل الصورة
    };
    img.src = src;
  }

  // زر تطبيق الألوان
  function applyTints() {
    applyTint1();
    applyTint2();
  }
  
  // دوال التلوين (ما تغيرت)
  function hexToRgb(hex) {
    hex = hex.replace(/^#/, '');
    if (hex.length === 3) hex = hex.split('').map(c => c + c).join('');
    const num = parseInt(hex, 16);
    return [(num >> 16) & 255, (num >> 8) & 255, num & 255];
  }

  function applyTint1() {
    if (!originalPixels1) return;
    const tint = swapState
      ? hexToRgb(document.getElementById('color2').value)
      : hexToRgb(document.getElementById('color1').value);
    const out = new ImageData(new Uint8ClampedArray(originalPixels1.data), canvas.width, canvas.height);
    for (let i = 0; i < out.data.length; i += 4) {
      const r = originalPixels1.data[i];
      const g = originalPixels1.data[i + 1];
      const b = originalPixels1.data[i + 2];
      const lum = 0.299 * r + 0.587 * g + 0.114 * b;
      const scale = lum / 255;
      out.data[i] = tint[0] * scale;
      out.data[i + 1] = tint[1] * scale;
      out.data[i + 2] = tint[2] * scale;
    }
    tintedPixels1 = out;
    renderFinal();
  }

  function applyTint2() {
    if (!originalPixels2) return;
    const tint = swapState
      ? hexToRgb(document.getElementById('color1').value)
      : hexToRgb(document.getElementById('color2').value);
    const out = new ImageData(new Uint8ClampedArray(originalPixels2.data), canvas.width, canvas.height);
    for (let i = 0; i < out.data.length; i += 4) {
      if (originalPixels2.data[i + 3] > 0) {
        const r = originalPixels2.data[i];
        const g = originalPixels2.data[i + 1];
        const b = originalPixels2.data[i + 2];
        const lum = 0.299 * r + 0.587 * g + 0.114 * b;
        const scale = lum / 255;
        out.data[i] = tint[0] * scale;
        out.data[i + 1] = tint[1] * scale;
        out.data[i + 2] = tint[2] * scale;
      }
    }
    tintedPixels2 = out;
    renderFinal();
  }

  function renderFinal() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    if (tintedPixels1) {
      let tempCanvas1 = document.createElement('canvas');
      tempCanvas1.width = canvas.width;
      tempCanvas1.height = canvas.height;
      tempCanvas1.getContext('2d').putImageData(tintedPixels1, 0, 0);
      ctx.drawImage(tempCanvas1, 0, 0);
    }
    if (tintedPixels2) {
      let tempCanvas2 = document.createElement('canvas');
      tempCanvas2.width = canvas.width;
      tempCanvas2.height = canvas.height;
      tempCanvas2.getContext('2d').putImageData(tintedPixels2, 0, 0);
      ctx.drawImage(tempCanvas2, 0, 0);
    }
  }
</script>

 
  

</body>
</html>



 
